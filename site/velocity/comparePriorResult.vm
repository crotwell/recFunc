#macro( tablerow $items )
    #set( $row = "" )
    #set( $td = "$tdodd" )
	#foreach( $i in $items)
		#set( $row = "${row}${td}${i}${tdend}" )
		#if($td == $tdodd) 
		    #set( $td = "$tdeven")
		#else
		    #set( $td = "$tdodd")
		#end
	#end
${tr}$row${trend}
#end
#macro( tablehead $items )
    #set( $row = "" )
    #set( $td = "$tdhead" )
	#foreach( $i in $items)
		#set( $row = "${row}${td}${i}${tdend}" )
	#end
${tr}$row${trend}
#end
#macro( link $href $name )
#if ( !$viewType || $viewType == "html" )
<a href="$href">$name</a>
#else
$name
#end
#end

#set( $tdhead = '<td class="headodd">' )
#set( $tdeven = '<td class="even">' )
#set( $tdodd = '<td class="odd">' )
#set( $tdend = '</td>' )
#set( $tr = '<tr>' )
#set( $th = '<th>' )
#set( $trend = "</tr>" )
#set( $thend = "</th>" )

<html>
<head>
<title>Comparison with Prior Result $name</title>
<link rel="stylesheet" type="text/css" href="station_list_style.css"/>
<script src="sorttable_2head.js" type="text/javascript"> </script>
<script src="tableRuler.js" type="text/javascript"> </script>
<script type="text/javascript">
window.onload=function(){
        tableruler();
        set_img_dir('images/')
}
</script>
</head>
<body>

#header()	
	
<div id="content">



<h1>Comparison with Prior Result $name
#if($hDiff)
 for results with a difference > $hDiff.
#end</h1>
<p>Bibliographic Entry: $ref.getReference()</p>
<p>Reference URL: <a href="$ref.getURL()">$ref.getURL()</a></p>
<p>Study type: $ref.getMethod()</p>

<p>View results as <a href="comparePriorResult.txt?$req.getQueryString()">text</a></p>

<table class="ruler sortable" id="dumb" cellpadding="0" cellspacing="0">
<th><td colspan="3"/><td class="headodd" colspan="9">EARS</td><td class="headodd" colspan="6">$name</td></th>

#set( $items = [ "Net", "Station", "Name", "Lat/Lon", "Est. Thick", "StdDev", "Est. Vp/Vs", "StdDev", "Assumed Vp", "Vs", "Poissons Ratio", "Num EQ", "Complexity", "Thick", "Vp/Vs", "Vp", "Vs", "Poissons Ratio", "H diff", "Extras" ] )
#tablehead( $items )

#foreach($sta in $stationList)
#set( $staurl = "station.html?netdbid=$sta.getNet().getDbId()&stacode=$sta.getCode()&gaussian=${gaussian}" )
#set( $stalink = "#link( $staurl $sta.getName() )" )
#foreach($priorR in $prior.get($sta))
#set( $items = [ "$sta.getNet().getCodeWithYear()", "$sta.getCode()", $stalink, "$sta.getLatitude()/$sta.getLongitude()", "$!summary.get($sta).getSum().formatMaxValueH()", "$fissures.formatQuantity($!summary.get($sta).getHStdDev())", "$!summary.get($sta).getSum().formatMaxValueK()", "$!summary.get($sta).formatKStdDev()", "$!summary.get($sta).getSum().formatAlpha()", "$!summary.get($sta).getSum().formatVs()", "$!summary.get($sta).getSum().formatPoissonsRatio()", "$!summary.get($sta).numEQ", "$!summary.get($sta).formatComplexityResidual()", "$!priorR.formatH()", "$!priorR.formatVpVs()", "$!priorR.formatVp()", "$!priorR.formatVs()", "$!priorR.formatPoissonsRatio()", "$!hDiffMap.get($priorR)", "$!priorR.formatExtras()" ] )
#tablerow( $items )
#end
#end
</table>


</div>
#footer()
</body>
</html>
