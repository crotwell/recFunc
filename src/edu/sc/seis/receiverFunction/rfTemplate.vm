<?xml version="1.0"?>
<template xmlns:xlink="http://www.w3.org/1999/xlink/">
<outputLocation>
<eventDir><originTime>yyyyMMddHHmmssSSS</originTime></eventDir>
<stationDir><networkCode/>.<stationCode/></stationDir>
</outputLocation>
<filename>seismograms.html</filename>
<picName><networkCode/>.<stationCode/>.<siteCode/>.<channelCode/>.png</picName>
<html xmlns:xlink="http://www.w3.org/1999/xlink/">
<head>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
<title>Receiver Functions for <station><name/></station> for <event><feRegionName/> <originTime>MM/dd/yyyy HH:mm:ss</originTime> Mag <magnitude/></event></title>
<style media="all">@import "../../main.css";</style>
</head>
<body>
#set ( $station = $sod_channel.getSite().getStation() )
<div id="Header">
<a href="../../location.html"> Events</a>
<a href="../event.html">
$FERegion.getRegionName(${sod_event.get_attributes().region})
$velocity_date.format("MM/dd/yyyy HH:mm:ss ZZZ", $sod_event.get_preferred_origin().getTime())</a>
${station.getNetworkAttr().get_code()}.${station.get_code()}-$station.getName()
</div>
<div id="Content">
<h1>Seismograms for this Event</h1>
<h2>Event Info</h2>
<table>
<tr>
<td><b>Region</b></td>
<td>$FERegion.getRegionName(${sod_event.get_attributes().region})</td>
</tr>
<tr>
<td><b>Time</b></td>
<td>$velocity_date.format("MM/dd/yyyy HH:mm:ss ZZZ", $sod_event.get_preferred_origin().getTime())</td>
</tr>
<tr>
<td><b>Magnitude</b></td>
<td>
#set ( $origin = $sod_event.get_preferred_origin() )
#foreach ($m in $origin.Magnitudes)
$fissures.formatMagnitude($m),
#end</td>
</tr>
<tr>
<td><b>Depth</b></td>
<td>$fissures.formatQuantity($fissures.getDepth($origin.location))</td>
</tr>
<tr>
<td><b>Latitude</b></td>
<td>$fissures.getLatitude($origin.location)</td>
</tr>
<tr>
<td><b>Longitude</b></td>
<td>$fissures.getLongitude($origin.location)</td>
</tr>
</table>
<h2>Station Info</h2>
<table>
<tr>
<td><b>Id</b></td>
<td>$station.get_code()</td>
</tr>
<tr>
<td><b>Name</b></td>
<td>$station.Name</td>
</tr>
<tr>
<td><b>Latitude</b></td>
<td>$fissures.getLatitude($station.location)</td>
</tr>
<tr>
<td><b>Longitude</b></td>
<td>$fissures.getLongitude($station.location)</td>
</tr>
<tr>
<td><b>Begin Time</b></td>
<td>$velocity_date.format("MM/dd/yyyy HH:mm:ss ZZZ", $fissures.getRangeBegin($station.EffectiveTime))</td>
</tr>
<tr>
<td><b>End Time</b></td>
<td>$velocity_date.format("MM/dd/yyyy HH:mm:ss ZZZ", $fissures.getRangeEnd($station.EffectiveTime))</td>
</tr>
</table>
<h2>Seismograms</h2>
<table>
#foreach ($chanId in $allChanIds)
#set ( $chanContext = $sod_cookieJar.get($chanId) )
#set ( $channel = $chanContext.get("sod_channel") )
<tr>
<td><b>$fissures.formatChannel($channel.get_id())</b><br/>
$!chanContext.sod_phaseStoN_P.value</td>
<td>
#if ($chanContext.status.Standing.equals($chanContext.status.Standing.getForName("SUCCESS")) || $chanContext.status.Standing.equals($chanContext.status.Standing.getForName("IN_PROG")))
<img src="${fissures.formatChannel($channel.get_id())}.png"/>
#else
$chanContext.status <br/>
#end
</td>
</tr>
#end
</table>
<br/>
<img src="$recFunc_hkstack_image"/>
<br/>

<table>
#foreach ($a in $recFunc_pred_auxData.keySet() )
<tr><td>$a</td><td>$recFunc_pred_auxData.get($a)</td></tr>
#end
</table>

<table>
<tr><td>percentMatch</td><td>$stack.percentMatch</td></tr>
<tr><td>ChannelId</td><td>$stack.ChannelId</td></tr>
<tr><td>P</td><td>$stack.P</td></tr>
<tr><td>Alpha</td><td>$stack.Alpha</td></tr>
<tr><td>MinH</td><td>$stack.MinH</td></tr>
<tr><td>StepH</td><td>$stack.StepH</td></tr>
<tr><td>NumH</td><td>$stack.NumH</td></tr>
<tr><td>MinK</td><td>$stack.MinK</td></tr>
<tr><td>StepK</td><td>$stack.StepK</td></tr>
<tr><td>NumK</td><td>$stack.NumK</td></tr>
<table>
</div>
<menu xlink:href="jar:edu/sc/seis/sod/data/templates/menu.xml"/>
<div id="footer">
<h2>Page last generated:</h2><now/>
</div>
</body>
</html>
</template>

